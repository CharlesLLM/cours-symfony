{% extends 'base_admin.html.twig' %}

{% block title %}Gestion des Films{% endblock %}

{% block admin %}
    <div class="flex flex-col">
        <h1 class="text-lg font-medium text-black ">
            Administration <span class="font-bold text-red-600">des films</span>
        </h1>
        <a href="{{ path('page_admin') }}" class="mt-0 block">&larr; Retour au tableau de bord</a>
        <a class="flex flex-col items-center mt-9 w-full" href="{{ path('page_admin_movie_new') }}">
            <div class="relative flex w-full bg-red-600 flex-row p-3 items-center justify-center rounded-lg overflow-hidden border cursor-pointer transition hover:bg-red-700 text-white">
                    <span class="font-bold mr-2">
                        <svg class="h-6 w-6" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>plus-circle</title><path d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/></svg>
                    </span>
                <span class="capitalize font-medium text-md">Ajouter un film</span>
            </div>
        </a>
    </div>
    <div class="mt-9">
        <div class="flex flex-col">
            <div class=" overflow-x-auto pb-4">
                <div class="min-w-full inline-block align-middle">
                    <form class="mb-9" method="GET">
                        <label class="mx-auto mt-8 relative bg-white flex flex-col md:flex-row items-center justify-center border border-gray-300 py-2 px-2 rounded-xl gap-2" for="search-bar">
                            <input id="search-bar" placeholder="Nom" name="search" class="px-3 py-1 w-full rounded-md flex-1 outline-none bg-white" required="">
                            <button type="submit" class="w-full md:w-auto px-3 py-1.5 bg-red-600 border-red-600 hover:bg-red-700 text-white fill-white duration-100 border border-gray-300 overflow-hidden relative rounded-lg text-md transition">
                                <div class="flex items-center transition-all opacity-1">
                                    <span class="text-sm font-semibold whitespace-nowrap truncate mx-auto">
                                        Rechercher
                                    </span>
                                </div>
                            </button>
                        </label>
                    </form>
                    <div class="overflow-hidden  border rounded-lg border-gray-300">
                        <table class="table-auto min-w-full rounded-xl">
                            <thead>
                            <tr class="bg-gray-50">

                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize">ID</th>
                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize min-w-[350px]">Nom</th>
                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize">Catégories</th>
                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize">Date de sortie</th>
                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize">Type</th>
                                <th scope="col" class="p-5 text-left whitespace-nowrap text-sm leading-6 font-semibold text-gray-900 capitalize">Actions</th>
                            </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-300">
                                {% for movie in movies %}
                                    <tr class="bg-white transition-all duration-500 hover:bg-gray-50">
                                        <td class="p-5 whitespace-nowrap text-sm leading-6 font-medium text-gray-900">#{{ movie.id }}</td>
                                        <td class=" px-5 py-3">
                                            <div class="w-48 flex items-center gap-3">
                                                <img src="{{ movie.coverImage }}" class="w-16 aspect-square" alt="">
                                                <div class="data">
                                                    <a class="font-normal text-sm text-gray-900 decoration-red-600" href="{{ path('show_detail', {id: movie.id}) }}" target="_blank">{{ movie.title }}</a>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="p-5 whitespace-nowrap text-sm leading-6 font-medium text-gray-900">
                                            <div class="flex flex-wrap gap-1">
                                                {% for category in movie.categories %}
                                                    <a target="_blank" href="{{ path('page_category', {nom: category.nom}) }}" class="py-1.5 px-2.5 bg-red-50 hover:bg-red-100 transition rounded-full flex justify-center items-center gap-1 text-gray-600">
                                                        <span class="font-medium text-xs">{{ category.label }}</span>
                                                    </a>
                                                {% endfor %}
                                            </div>
                                        </td>
                                        <td class="p-5 whitespace-nowrap text-sm leading-6 font-medium text-gray-900">{{ movie.releaseDate | date('d/m/Y') }}</td>
                                        <td class="p-5 whitespace-nowrap text-sm leading-6 font-medium text-gray-900">
                                            <div class="py-1.5 px-2.5 bg-blue-50 rounded-full flex justify-center w-20 items-center gap-1 text-blue-600">
                                                <span class="font-medium text-xs ">Film</span>
                                            </div>
                                        </td>
                                        <td class="flex p-5 items-center gap-0.5">
                                            <a href="{{ path('page_admin_movie_edit', {id: movie.id}) }}" class="p-2 rounded-lg transition text-orange-400 flex item-center hover:bg-black/10">
                                                <svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                    <title>pencil</title>
                                                    <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                                                </svg>
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="flex justify-center items-center mt-9 grid grid-cols-3 w-full">
                        <div class="flex items-center">
                            <div class="pl-2 text-sm font-medium">
                                Affichage de <span class="text-red-600">10</span> éléments sur <span class="text-red-600">40</span> (Page <span class="text-red-600">1</span> de <span class="text-red-600">4</span>)
                            </div>
                        </div>
                        <div class="flex items-center justify-center">
                            <div class="flex items-center space-x-2">
                                <label>
                                    <select class="h-8 text-sm pr-8 leading-none transition duration-75 border-gray-300 rounded-lg shadow-sm outline-none focus:border-red-500 focus:ring-1 focus:ring-inset focus:ring-red-500">
                                        <option value="5">5</option>
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="-1">All</option>
                                    </select>
                                    <span class="text-sm font-medium">per page</span>
                                </label>
                            </div>
                        </div>
                        <div class="flex items-center justify-end">
                            <div class="rounded-lg">
                                <ol class="flex items-center text-sm">
                                    <li>
                                        <button type="button" class="mx-1 relative flex items-center justify-center font-medium px-3 py-2 rounded-md outline-none transition bg-red-600 text-white">
                                            &larr; Page précédente
                                        </button>
                                    </li>
                                    <li>
                                        <button type="button" class="mx-1 relative flex items-center justify-center font-medium px-3 py-2 rounded-md outline-none transition bg-red-600 text-white">
                                            Page suivante &rarr;
                                        </button>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <a href="{{ path('page_admin') }}" class="mt-8 p-2 block">&larr; Retour au tableau de bord</a>
{% endblock %}
