{% extends 'base_auth.html.twig' %}

{% block auth_content %}
    <h1 class="text-center text-lg font-bold">Mot de passe perdu ?</h1>
    <p class="text-center text-sm font-medium opacity-70 mt-5">Choisissez votre nouveau mot de passe</p>
    <div class="flex items-center font-medium mt-8 bg-orange-100 border border-black/10 rounded-lg px-8 py-4">
        Votre mot de passe doit contenir au moins 8 caract√®res, une majuscule, une minuscule et un chiffre.
    </div>
    <form class="mt-10" method="POST">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token('reset') }}">

        {{ form_start(form) }}

        <div class="relative">
            {{ form_row(form.email) }}
        </div>
        <div class="relative mt-4">
            {{ form_row(form.plainPassword, {attr: {placeholder: 'Nouveau mot de passe'}}) }}
            <span class="absolute right-2 inset-y-0 flex items-center px-2 opacity-50 hover:opacity-100 transition" id="showPassword"><svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>eye</title><path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg></span>
        </div>
        <div class="relative mt-4">
            {{ form_row(form.repeatPassword, {attr: {placeholder: 'Resaisissez votre nouveau mot de passe'}}) }}
            <span class="absolute right-2 inset-y-0 flex items-center px-2 opacity-50 hover:opacity-100 transition" id="showPassword"><svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>eye</title><path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg></span>
        </div>
        <div class="flex items-center justify-center mt-8">
            <button type="submit" class="relative flex w-full bg-red-600 flex-row p-3 items-center justify-center rounded-lg overflow-hidden border cursor-pointer transition text-white hover:opacity-90 hover:scale-105">
                <svg class="h-5 w-5 fill-current mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <title>check-circle</title>
                    <path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"></path>
                </svg>
                Changer mon mot de passe
            </button>
        </div>
        {{ form_end(form) }}

        <div class="flex items-center justify-center mt-16">
            <a class="text-red-600 cursor-pointer transition hover:text-red-700 hover:scale-105"> Vous vous souvenez de votre mot de passe ? Connectez-vous </a>
        </div>
    </form>
{% endblock %}

{% block scripts %}
    <script>
        document.querySelectorAll('#showPassword').forEach((el) => {
            el.addEventListener('click', () => {
                const input = el.parentElement.querySelector('input');
                if (input.type === 'password') {
                    input.type = 'text';
                } else {
                    input.type = 'password';
                }
            });
        });
    </script>
{% endblock %}
